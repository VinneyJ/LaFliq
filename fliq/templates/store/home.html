{% extends 'store/index.html' %}
{% load static %}

{% block content %}
    <div class="container">
        <div class="row">
            <h2>Products</h2>
        </div>
        <div class="row">
            {% for item in items %}
            <!--start products div -->
            <div class="col-lg-3">
            <div class="product-box">
                <div class="product-inner-box position-relative">
                    <div class="icons position-absolute">
                        <a href="#" class="text-decoration-none text-dark"><i class="fa-solid fa-heart"></i></a>
                    </div>
                    <div class="onsale">
                        <span class="badge rounded-0 text-light"><i class="fa-solid fa-tag"></i> 15%</span>
                    </div>
                    <img src="{{item.image.url}}" alt="" class="img-fluid">
                        
                    
                    <!-- <div class="cart-btn">
                        <a href="#" onclick="add_to_cart({{ item_id }})" class="btn btn-light"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add to cart</a>
                    </div> -->

                </div>
                <div class="product-info">
                    <div class="product-name">
                        <h4>{{item.title}}</h4>
                    </div>
                    <div class="product-price"> 
                        Ksh<span>{{item.price}}</span>
                    </div>
                </div>
            </div>
            </div>
            {% endfor %}
            <!--end products div -->
        </div>
    </div>

{% endblock content %}
<script>
        
    function add_to_cart(item_id) {
        $.ajax({
          url: '/cart/add-to-cart/' + item_id + '/',
          type: 'POST',
          dataType: 'json',
          success: function(response) {
            // Update the cart count and total in the header
            $('#cart-count').text(response.cart_count);
            $('#cart-total').text(response.cart_total);
            
            // Display a success message
            alert('Item added to cart');
          },
          error: function(xhr, status, error) {
            // Display an error message
            alert('There was a problem adding the item to the cart');
          }
        });
      }
    </script>